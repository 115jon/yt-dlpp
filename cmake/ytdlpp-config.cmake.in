@PACKAGE_INIT@

include(CMakeFindDependencyMacro)

# Find required dependencies
# Boost - works with both vcpkg Boost (CONFIG) and system Boost (Module)
find_dependency(Boost REQUIRED COMPONENTS regex program_options filesystem)

find_dependency(fmt CONFIG REQUIRED)
find_dependency(nlohmann_json CONFIG REQUIRED)
find_dependency(spdlog CONFIG REQUIRED)
find_dependency(qjs CONFIG REQUIRED)
find_dependency(certify CONFIG REQUIRED)
find_dependency(ZLIB REQUIRED)

# FFmpeg - try CMake CONFIG mode first (vcpkg), then fallback to pkg-config
find_package(FFMPEG QUIET CONFIG COMPONENTS avcodec avformat swresample swscale)
if(NOT FFMPEG_FOUND)
  find_package(PkgConfig QUIET)
  if(PKG_CONFIG_FOUND)
    pkg_check_modules(FFMPEG QUIET IMPORTED_TARGET libavcodec libavformat libswresample libswscale)
  endif()
endif()
if(NOT FFMPEG_FOUND)
  # Final fallback - MODULE mode
  find_dependency(FFMPEG REQUIRED COMPONENTS avcodec avformat swresample swscale)
endif()

# Include targets
include("${CMAKE_CURRENT_LIST_DIR}/ytdlpp-targets.cmake")

check_required_components(ytdlpp)
